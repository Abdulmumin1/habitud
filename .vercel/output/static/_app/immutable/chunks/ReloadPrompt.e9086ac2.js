import{s as T,e as S,i as b,r as y,d as v,F as E,f as h,a as W,g,h as R,c as x,Q as C,j as k,C as w,D as L}from"./scheduler.f9761f20.js";import{S as U,i as A}from"./index.ff8ba8f7.js";import{_ as D}from"./preload-helper.a4192956.js";import{w as P}from"./index.7ad99811.js";function I(r={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:t,onRegistered:i,onRegisteredSW:l,onRegisterError:f}=r;let n,u,p;const m=async(c=!0)=>{await u,await(p==null?void 0:p())};async function a(){if("serviceWorker"in navigator){const{Workbox:c}=await D(()=>import("./workbox-window.prod.es5.a7b12eab.js"),[],import.meta.url);n=new c("/sw.js",{scope:"/",type:"classic"}),p=async()=>{await(n==null?void 0:n.messageSkipWaiting())};{let o=!1;const d=()=>{o=!0,n==null||n.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()}),s==null||s()};n.addEventListener("installed",_=>{typeof _.isUpdate>"u"?typeof _.isExternal<"u"?_.isExternal?d():!o&&(t==null||t()):_.isExternal?window.location.reload():!o&&(t==null||t()):_.isUpdate||t==null||t()}),n.addEventListener("waiting",d),n.addEventListener("externalwaiting",d)}n.register({immediate:e}).then(o=>{l?l("/sw.js",o):i==null||i(o)}).catch(o=>{f==null||f(o)})}}return u=a(),m}function V(r={}){const{immediate:e=!0,onNeedRefresh:s,onOfflineReady:t,onRegistered:i,onRegisteredSW:l,onRegisterError:f}=r,n=P(!1),u=P(!1),p=I({immediate:e,onOfflineReady(){u.set(!0),t==null||t()},onNeedRefresh(){n.set(!0),s==null||s()},onRegistered:i,onRegisteredSW:l,onRegisterError:f});return{needRefresh:n,offlineReady:u,updateServiceWorker:p}}function N(r){let e,s,t,i,l,f="Close",n,u;function p(o,d){return o[1]?B:q}let m=p(r),a=m(r),c=r[0]&&j(r);return{c(){e=h("div"),s=h("div"),a.c(),t=W(),c&&c.c(),i=W(),l=h("button"),l.textContent=f,this.h()},l(o){e=g(o,"DIV",{class:!0,role:!0});var d=R(e);s=g(d,"DIV",{class:!0});var _=R(s);a.l(_),_.forEach(v),t=x(d),c&&c.l(d),i=x(d),l=g(d,"BUTTON",{class:!0,"data-svelte-h":!0}),C(l)!=="svelte-1ff2ewa"&&(l.textContent=f),d.forEach(v),this.h()},h(){k(s,"class","message svelte-141ior1"),k(l,"class","svelte-141ior1"),k(e,"class","pwa-toast svelte-141ior1"),k(e,"role","alert")},m(o,d){b(o,e,d),w(e,s),a.m(s,null),w(e,t),c&&c.m(e,null),w(e,i),w(e,l),n||(u=L(l,"click",r[6]),n=!0)},p(o,d){m!==(m=p(o))&&(a.d(1),a=m(o),a&&(a.c(),a.m(s,null))),o[0]?c?c.p(o,d):(c=j(o),c.c(),c.m(e,i)):c&&(c.d(1),c=null)},d(o){o&&v(e),a.d(),c&&c.d(),n=!1,u()}}}function q(r){let e,s="New content available, click on reload button to update.";return{c(){e=h("span"),e.textContent=s},l(t){e=g(t,"SPAN",{"data-svelte-h":!0}),C(e)!=="svelte-jdu89s"&&(e.textContent=s)},m(t,i){b(t,e,i)},d(t){t&&v(e)}}}function B(r){let e,s="App ready to work offline";return{c(){e=h("span"),e.textContent=s},l(t){e=g(t,"SPAN",{"data-svelte-h":!0}),C(e)!=="svelte-1uzusaj"&&(e.textContent=s)},m(t,i){b(t,e,i)},d(t){t&&v(e)}}}function j(r){let e,s="Reload",t,i;return{c(){e=h("button"),e.textContent=s,this.h()},l(l){e=g(l,"BUTTON",{class:!0,"data-svelte-h":!0}),C(e)!=="svelte-8ag32q"&&(e.textContent=s),this.h()},h(){k(e,"class","svelte-141ior1")},m(l,f){b(l,e,f),t||(i=L(e,"click",r[7]),t=!0)},p:y,d(l){l&&v(e),t=!1,i()}}}function z(r){let e,s=r[2]&&N(r);return{c(){s&&s.c(),e=S()},l(t){s&&s.l(t),e=S()},m(t,i){s&&s.m(t,i),b(t,e,i)},p(t,[i]){t[2]?s?s.p(t,i):(s=N(t),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},i:y,o:y,d(t){t&&v(e),s&&s.d(t)}}}function F(r,e,s){let t,i,l;const{needRefresh:f,updateServiceWorker:n,offlineReady:u}=V({onRegistered(a){console.log(`SW Registered: ${a}`)},onRegisterError(a){console.log("SW registration error",a)}});E(r,f,a=>s(0,i=a)),E(r,u,a=>s(1,l=a));const p=()=>{u.set(!1),f.set(!1)},m=()=>n(!0);return r.$$.update=()=>{r.$$.dirty&3&&s(2,t=l||i)},[i,l,t,f,n,u,p,m]}class K extends U{constructor(e){super(),A(this,e,F,z,T,{})}}export{K as default};
